<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Monitor Analytics Center</title>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <script src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=qpbrmxiff4"></script>

  <style>
    :root {
      --primary-color: #2563EB;
      --bg-color: #F1F5F9;
      --card-bg: #FFFFFF;
      --text-main: #1E293B;
      --text-sub: #64748B;
      --border-color: #E2E8F0;
      --success-dot: #10B981;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0; padding: 0;
      font-family: 'Pretendard', sans-serif;
      background-color: var(--bg-color);
      color: var(--text-main);
      height: 100vh;
      display: flex;
      overflow: hidden;
    }

    /* === 전체 레이아웃 컨테이너 === */
    .app-container {
      display: flex;
      width: 100%; height: 100%;
      padding: 20px;
      gap: 20px;
    }

    /* ------------------------------------------------
       [LEFT PANEL] 지도(상) + 달력(하)
       ------------------------------------------------ */
    .left-panel {
      flex: 3.5; /* 너비 비율 35% */
      display: flex;
      flex-direction: column;
      gap: 20px;
      min-width: 350px;
    }

    /* 1. 지도 영역 (높이 줄임) */
    .map-box {
      flex: 5; /* 세로 비율 40% */
      background: white;
      border-radius: 20px;
      overflow: hidden;
      border: 1px solid white;
      box-shadow: 0 4px 20px rgba(0,0,0,0.05);
      position: relative;
    }
    
    .map-badge {
      position: absolute; top: 16px; left: 16px; z-index: 100;
      background: white; padding: 8px 12px; border-radius: 12px;
      font-size: 13px; font-weight: 700; color: var(--text-main);
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      display: flex; align-items: center; gap: 6px;
    }

    /* 2. 달력 영역 (높이 키움) */
    .calendar-box {
      flex: 5; /* 세로 비율 60% */
      background: white;
      border-radius: 20px;
      padding: 24px;
      border: 1px solid white;
      box-shadow: 0 4px 20px rgba(0,0,0,0.05);
      display: flex; flex-direction: column;
    }

    .cal-header {
      display: flex; justify-content: space-between; align-items: center;
      margin-bottom: 20px;
    }
    .cal-title { font-size: 18px; font-weight: 800; color: #1E3A8A; }
    .cal-nav { display: flex; gap: 8px; }
    .btn-nav {
      background: #F8FAFC; border: none; width: 32px; height: 32px;
      border-radius: 8px; cursor: pointer; color: var(--text-sub);
      transition: all 0.2s;
    }
    .btn-nav:hover { background: #E2E8F0; color: var(--primary-color); }

    .cal-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 8px;
      flex: 1; /* 남은 공간 채우기 */
      align-content: start;
    }

    .day-name {
      text-align: center; font-size: 12px; font-weight: 700; color: #94A3B8;
      margin-bottom: 8px;
    }
    
    .date-cell {
      aspect-ratio: 1/1; /* 정사각형 유지 */
      display: flex; flex-direction: column; align-items: center; justify-content: center;
      border-radius: 12px; font-size: 14px; font-weight: 600; color: #CBD5E1;
      cursor: default; position: relative; border: 1px solid transparent;
      transition: all 0.2s;
    }

    /* 데이터 있는 날 */
    .date-cell.has-data {
      color: var(--text-main);
      background-color: #F8FAFC;
      cursor: pointer;
    }
    .date-cell.has-data:hover {
      border-color: var(--primary-color);
      color: var(--primary-color);
    }

    /* 선택된 날 (누적) */
    .date-cell.selected {
      background-color: var(--primary-color);
      color: white;
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
    }

    /* 데이터 점(Dot) */
    .dot {
      width: 5px; height: 5px; background: var(--success-dot);
      border-radius: 50%; margin-top: 4px; display: none;
    }
    .date-cell.has-data .dot { display: block; }
    .date-cell.selected .dot { background: white; }

    .selection-summary {
      margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--border-color);
      font-size: 13px; color: var(--text-sub); display: flex; justify-content: space-between;
    }

    /* ------------------------------------------------
       [RIGHT PANEL] 대시보드 (그래프)
       ------------------------------------------------ */
    .right-panel {
      flex: 6.5; /* 너비 비율 65% */
      background: white;
      border-radius: 20px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.05);
      display: flex; flex-direction: column;
      overflow: hidden;
    }

    /* 헤더 & 필터바 */
    .dash-header {
      padding: 24px 32px;
      border-bottom: 1px solid var(--border-color);
    }
    .header-top { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px; }
    .page-title h2 { margin: 0; font-size: 22px; font-weight: 800; color: #1E3A8A; }
    .page-title p { margin: 4px 0 0; font-size: 13px; color: var(--text-sub); }

    .filter-bar {
      display: flex; gap: 16px; align-items: center; flex-wrap: wrap;
    }
    
    /* 드롭다운 스타일 */
    .custom-select {
      padding: 10px 16px; border: 1px solid var(--border-color); border-radius: 10px;
      font-size: 14px; font-weight: 600; color: var(--text-main); cursor: pointer;
      background: white; outline: none; min-width: 200px;
    }

    /* 체크박스 칩 스타일 */
    .toggle-group { display: flex; gap: 8px; }
    .t-btn {
      padding: 8px 14px; border-radius: 20px; border: 1px solid var(--border-color);
      font-size: 13px; font-weight: 600; color: var(--text-sub); cursor: pointer;
      display: flex; align-items: center; gap: 6px; transition: all 0.2s;
    }
    .t-btn.active {
      background: #EFF6FF; border-color: var(--primary-color); color: var(--primary-color);
    }
    .t-btn i { font-size: 12px; }

    /* 대시보드 바디 (스크롤) */
    .dash-content {
      flex: 1; overflow-y: auto; padding: 32px; background: #FAFAFA;
    }

    /* KPI 카드 */
    .kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 24px; }
    .kpi-card {
      background: white; padding: 20px; border-radius: 16px;
      border: 1px solid var(--border-color); box-shadow: 0 2px 4px rgba(0,0,0,0.02);
    }
    .kpi-label { font-size: 12px; font-weight: 700; color: var(--text-sub); text-transform: uppercase; letter-spacing: 0.5px; }
    .kpi-value { font-size: 26px; font-weight: 800; color: var(--text-main); margin-top: 8px; }

    /* 차트 컨테이너 */
    .chart-container {
      background: white; border-radius: 16px; padding: 24px;
      border: 1px solid var(--border-color); box-shadow: 0 2px 4px rgba(0,0,0,0.02);
    }
    
    /* 히트맵 스타일 */
    .heatmap-layout { display: flex; gap: 10px; margin-top: 20px; }
    .hm-y-axis { display: grid; grid-template-rows: repeat(7, 30px); gap: 4px; text-align: right; padding-right: 10px; }
    .hm-row-label { font-size: 12px; font-weight: 600; color: var(--text-sub); line-height: 30px; }
    
    .hm-grid-area { flex: 1; display: grid; grid-template-columns: repeat(18, 1fr); gap: 4px; }
    .hm-cell { height: 30px; border-radius: 4px; background: #F1F5F9; }
    .l1 { background: #DBEAFE; } .l2 { background: #93C5FD; }
    .l3 { background: #3B82F6; } .l4 { background: #1E40AF; }

    .hm-x-axis { display: grid; grid-template-columns: repeat(18, 1fr); gap: 4px; margin-top: 6px; padding-left: 50px; }
    .hm-col-label { font-size: 10px; color: #94A3B8; text-align: center; }

  </style>
</head>
<body>

<div class="app-container">
  
  <div class="left-panel">
    
    <div class="map-box">
      <div id="miniMap" style="width:100%; height:100%;"></div>
      <div class="map-badge">
        <i class="fa-solid fa-location-dot" style="color:#2563EB;"></i> 강남역 1번 출구
      </div>
    </div>

    <div class="calendar-box">
      <div class="cal-header">
        <div class="cal-title">October 2025</div>
        <div class="cal-nav">
          <button class="btn-nav"><i class="fa-solid fa-chevron-left"></i></button>
          <button class="btn-nav"><i class="fa-solid fa-chevron-right"></i></button>
        </div>
      </div>

      <div class="cal-grid" style="flex:0; margin-bottom:10px;">
        <div class="day-name">Sun</div><div class="day-name">Mon</div><div class="day-name">Tue</div>
        <div class="day-name">Wed</div><div class="day-name">Thu</div><div class="day-name">Fri</div>
        <div class="day-name">Sat</div>
      </div>

      <div class="cal-grid" id="calendarGrid">
        </div>

      <div class="selection-summary">
        <div style="display:flex; gap:10px; align-items:center;">
          <div style="display:flex; align-items:center; gap:4px;"><span style="width:8px; height:8px; background:#10B981; border-radius:50%;"></span> Data Available</div>
        </div>
        <div>
          <strong style="color:var(--primary-color)" id="selCount">0</strong> days selected
        </div>
      </div>
    </div>

  </div>


  <div class="right-panel">
    
    <div class="dash-header">
      <div class="header-top">
        <div class="page-title">
          <h2>Analytics Dashboard</h2>
          <p>모니터 유동인구 및 광고 효율 분석</p>
        </div>
        <button style="background:#2563EB; color:white; border:none; padding:12px 24px; border-radius:10px; font-weight:700; cursor:pointer;">
          <i class="fa-solid fa-file-export"></i> 리포트 다운로드
        </button>
      </div>

      <div class="filter-bar">
        <select class="custom-select">
          <option>전체 트래픽 (All Traffic)</option>
          <option>[광고] 나이키 겨울 시즌</option>
          <option>[광고] 아이폰 16 런칭</option>
        </select>

        <div class="toggle-group">
          <div class="t-btn active" onclick="this.classList.toggle('active')"><i class="fa-solid fa-users"></i> Traffic</div>
          <div class="t-btn active" onclick="this.classList.toggle('active')"><i class="fa-solid fa-venus-mars"></i> Gender</div>
          <div class="t-btn" onclick="this.classList.toggle('active')"><i class="fa-solid fa-arrow-down-9-1"></i> Age</div>
          <div class="t-btn" onclick="this.classList.toggle('active')"><i class="fa-regular fa-eye"></i> Attention</div>
        </div>
      </div>
    </div>

    <div class="dash-content">
      
      <div class="kpi-grid">
        <div class="kpi-card">
          <div class="kpi-label">Total Impressions</div>
          <div class="kpi-value">42,593</div>
        </div>
        <div class="kpi-card">
          <div class="kpi-label">Avg. Attention</div>
          <div class="kpi-value">3.8s</div>
        </div>
        <div class="kpi-card">
          <div class="kpi-label">Peak Hour</div>
          <div class="kpi-value">19:00</div>
        </div>
        <div class="kpi-card">
          <div class="kpi-label">Main Target</div>
          <div class="kpi-value">F / 20s</div>
        </div>
      </div>

      <div class="chart-container">
        <div style="display:flex; justify-content:space-between;">
          <h3 style="margin:0; font-size:16px; color:#1E3A8A;">Weekly Traffic Heatmap</h3>
          <div style="font-size:12px; color:#64748B;">Low ■ ■ ■ ■ High</div>
        </div>
        
        <div class="heatmap-layout">
          <div class="hm-y-axis">
            <div class="hm-row-label">Mon</div><div class="hm-row-label">Tue</div>
            <div class="hm-row-label">Wed</div><div class="hm-row-label">Thu</div>
            <div class="hm-row-label">Fri</div><div class="hm-row-label">Sat</div>
            <div class="hm-row-label">Sun</div>
          </div>
          <div class="hm-grid-area" id="heatGrid">
            </div>
        </div>
        <div class="hm-x-axis">
            <span class="hm-col-label">06</span><span class="hm-col-label">07</span>
            <span class="hm-col-label">08</span><span class="hm-col-label">09</span>
            <span class="hm-col-label">10</span><span class="hm-col-label">11</span>
            <span class="hm-col-label">12</span><span class="hm-col-label">13</span>
            <span class="hm-col-label">14</span><span class="hm-col-label">15</span>
            <span class="hm-col-label">16</span><span class="hm-col-label">17</span>
            <span class="hm-col-label">18</span><span class="hm-col-label">19</span>
            <span class="hm-col-label">20</span><span class="hm-col-label">21</span>
            <span class="hm-col-label">22</span><span class="hm-col-label">23</span>
        </div>
      </div>

    </div>

  </div>
</div>

<script>
  // 1. 네이버 지도 (미니맵)
  var mapOptions = { center: new naver.maps.LatLng(37.498095, 127.027610), zoom: 15, disableDefaultUI: true };
  var map = new naver.maps.Map('miniMap', mapOptions);

  // 2. 달력 로직 (누적 선택)
  const calGrid = document.getElementById('calendarGrid');
  const selCountDisplay = document.getElementById('selCount');
  
  // 시뮬레이션: 데이터가 존재하는 날짜 (25~30일)
  const availableData = [25, 26, 27, 28, 29, 30];
  let selectedDates = [26, 27, 28]; // 초기 선택값

  function renderCalendar() {
    calGrid.innerHTML = '';
    // 10월 1일이 수요일이라 가정 (빈칸 3개)
    for(let i=0; i<3; i++) { calGrid.innerHTML += `<div></div>`; }

    for(let d=1; d<=31; d++) {
      const hasData = availableData.includes(d);
      const isSelected = selectedDates.includes(d);
      
      let className = 'date-cell';
      if(hasData) className += ' has-data';
      if(isSelected) className += ' selected';
      
      const clickAttr = hasData ? `onclick="toggleDate(${d})"` : '';

      calGrid.innerHTML += `
        <div class="${className}" ${clickAttr}>
          ${d}
          <div class="dot"></div>
        </div>
      `;
    }
    selCountDisplay.innerText = selectedDates.length;
  }

  window.toggleDate = function(date) {
    if(selectedDates.includes(date)) {
      selectedDates = selectedDates.filter(d => d !== date);
    } else {
      selectedDates.push(date);
    }
    renderCalendar(); // UI 갱신
  }

  // 초기 실행
  renderCalendar();


  // 3. 히트맵 더미 생성
  const heatGrid = document.getElementById('heatGrid');
  for(let i=0; i < 7 * 18; i++) {
    const lv = Math.floor(Math.random() * 5); // 0~4
    const div = document.createElement('div');
    div.className = `hm-cell ${lv > 0 ? 'l'+lv : ''}`;
    heatGrid.appendChild(div);
  }
</script>

</body>
</html>
