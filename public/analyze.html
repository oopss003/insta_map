<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Monitor Analytics Center</title>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=qpbrmxiff4"></script>

  <style>
    :root {
      --primary-color: #2563EB;
      --bg-color: #F1F5F9;
      --card-bg: #FFFFFF;
      --text-main: #1E293B;
      --text-sub: #64748B;
      --border-color: #E2E8F0;
      --success-dot: #10B981;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0; padding: 0;
      font-family: 'Pretendard', sans-serif;
      background-color: var(--bg-color);
      color: var(--text-main);
      height: 100vh;
      display: flex;
      overflow: hidden;
    }

    .app-container {
      display: flex; width: 100%; height: 100%; padding: 20px; gap: 20px;
    }

    /* === [LEFT PANEL] === */
    .left-panel {
      flex: 3.5; display: flex; flex-direction: column; gap: 20px; min-width: 350px; height: 100%;
    }

    .map-box {
      flex: 5; min-height: 0; background: white; border-radius: 20px;
      overflow: hidden; border: 1px solid white; box-shadow: 0 4px 20px rgba(0,0,0,0.05); position: relative;
    }
    .map-badge {
      position: absolute; top: 16px; left: 16px; z-index: 100;
      background: white; padding: 8px 12px; border-radius: 12px;
      font-size: 13px; font-weight: 700; color: var(--text-main);
      box-shadow: 0 2px 8px rgba(0,0,0,0.1); display: flex; align-items: center; gap: 6px;
    }

    .calendar-box {
      flex: 5; min-height: 0; background: white; border-radius: 20px; padding: 20px;
      border: 1px solid white; box-shadow: 0 4px 20px rgba(0,0,0,0.05); display: flex; flex-direction: column;
    }
    .cal-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; flex-shrink: 0; }
    .cal-title { font-size: 18px; font-weight: 800; color: #1E3A8A; }
    .cal-nav { display: flex; gap: 8px; }
    .btn-nav { background: #F8FAFC; border: none; width: 32px; height: 32px; border-radius: 8px; cursor: pointer; color: var(--text-sub); }

    .cal-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 1px; flex: 1; align-content: center; overflow: hidden; }
    .day-name { text-align: center; font-size: 11px; font-weight: 700; color: #94A3B8; }
    .date-cell { height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; border-radius: 8px; font-size: 13px; font-weight: 600; color: #CBD5E1; cursor: default; border: 1px solid transparent; }
    .date-cell.has-data { color: var(--text-main); background-color: #F8FAFC; cursor: pointer; }
    .date-cell.has-data:hover { border-color: var(--primary-color); color: var(--primary-color); }
    .date-cell.selected { background-color: var(--primary-color); color: white; box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3); }
    .dot { width: 4px; height: 4px; background: var(--success-dot); border-radius: 50%; margin-top: 2px; display: none; }
    .date-cell.has-data .dot { display: block; }
    .date-cell.selected .dot { background: white; }
    .selection-summary { margin-top: 10px; padding-top: 10px; border-top: 1px solid var(--border-color); font-size: 12px; color: var(--text-sub); display: flex; justify-content: space-between; flex-shrink: 0; }

    /* === [RIGHT PANEL] === */
    .right-panel {
      flex: 6.5; background: white; border-radius: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.05);
      display: flex; flex-direction: column; overflow: hidden;
    }

    .dash-header { padding: 24px 32px; border-bottom: 1px solid var(--border-color); }
    .header-top { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 24px; }
    .header-actions { display: flex; gap: 12px; }
    .btn-base { padding: 10px 18px; border-radius: 10px; font-weight: 700; cursor: pointer; display: flex; align-items: center; gap: 8px; font-size: 14px; transition: all 0.2s; border: none; }
    .btn-primary { background: var(--primary-color); color: white; }
    .btn-primary:hover { background: #1D4ED8; }
    .btn-secondary { background: white; border: 1px solid var(--border-color); color: var(--text-sub); }
    .btn-secondary:hover { background: #F8FAFC; color: var(--text-main); border-color: #CBD5E1; }
    .page-title h2 { margin: 0; font-size: 22px; font-weight: 800; color: #1E3A8A; }
    .page-title p { margin: 4px 0 0; font-size: 13px; color: var(--text-sub); }

    /* --- 필터 바 수정됨 (상세 필터) --- */
    .filter-bar { display: flex; flex-direction: column; gap: 16px; }

    /* 1행: 광고 선택 & 메트릭 */
    .filter-row { display: flex; align-items: center; gap: 20px; flex-wrap: wrap; }
    
    .custom-select {
      padding: 10px 16px; border: 1px solid var(--border-color); border-radius: 10px;
      font-size: 14px; font-weight: 600; color: var(--text-main); cursor: pointer;
      background: white; outline: none; min-width: 240px;
    }

    /* 필터 그룹 스타일 */
    .filter-group { display: flex; align-items: center; gap: 12px; }
    .filter-label { font-size: 12px; font-weight: 700; color: #94A3B8; text-transform: uppercase; min-width: 40px;}
    
    .chip-container { display: flex; gap: 6px; flex-wrap: wrap; }
    
    /* 상세 필터 버튼 (칩) */
    .chip-btn {
      padding: 6px 12px; border-radius: 20px; border: 1px solid var(--border-color);
      font-size: 12px; font-weight: 600; color: var(--text-sub); cursor: pointer;
      transition: all 0.2s; background: white; display: flex; align-items: center; gap: 4px;
    }
    .chip-btn:hover { background: #F8FAFC; border-color: #CBD5E1; }
    
    /* 활성화 상태 */
    .chip-btn.active {
      background: #EFF6FF; border-color: var(--primary-color); color: var(--primary-color);
    }
    .chip-btn.active-female { background: #FFF0F6; border-color: #EC4899; color: #EC4899; }
    .chip-btn.active-male { background: #EFF6FF; border-color: #3B82F6; color: #3B82F6; }


    .dash-content { flex: 1; overflow-y: auto; padding: 32px; background: #FAFAFA; }

    .kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 24px; }
    .kpi-card { background: white; padding: 20px; border-radius: 16px; border: 1px solid var(--border-color); }
    .kpi-label { font-size: 12px; font-weight: 700; color: var(--text-sub); }
    .kpi-value { font-size: 26px; font-weight: 800; color: var(--text-main); margin-top: 8px; }

    .chart-container { background: white; border-radius: 16px; padding: 24px; border: 1px solid var(--border-color); }
    .heatmap-layout { display: flex; gap: 10px; margin-top: 20px; }
    .hm-y-axis { display: grid; grid-template-rows: repeat(7, 30px); gap: 4px; text-align: right; padding-right: 10px; }
    .hm-row-label { font-size: 12px; font-weight: 600; color: var(--text-sub); line-height: 30px; }
    .hm-grid-area { flex: 1; display: grid; grid-template-columns: repeat(18, 1fr); gap: 4px; }
    .hm-cell { height: 30px; border-radius: 4px; background: #F1F5F9; }
    .l1 { background: #DBEAFE; } .l2 { background: #93C5FD; } .l3 { background: #3B82F6; } .l4 { background: #1E40AF; }
    .hm-x-axis { display: grid; grid-template-columns: repeat(18, 1fr); gap: 4px; margin-top: 6px; padding-left: 50px; }
    .hm-col-label { font-size: 10px; color: #94A3B8; text-align: center; }
  </style>
</head>
<body>

<div class="app-container">
  
  <div class="left-panel">
    <div class="map-box">
      <div id="miniMap" style="width:100%; height:100%;"></div>
      <div class="map-badge">
        <i class="fa-solid fa-location-dot" style="color:#2563EB;"></i> 강남역 1번 출구
      </div>
    </div>

    <div class="calendar-box">
      <div class="cal-header">
        <div class="cal-title">October 2025</div>
        <div class="cal-nav">
          <button class="btn-nav"><i class="fa-solid fa-chevron-left"></i></button>
          <button class="btn-nav"><i class="fa-solid fa-chevron-right"></i></button>
        </div>
      </div>
      <div class="cal-grid" style="flex:0; min-height:auto; margin-bottom:10px;">
        <div class="day-name">Sun</div><div class="day-name">Mon</div><div class="day-name">Tue</div>
        <div class="day-name">Wed</div><div class="day-name">Thu</div><div class="day-name">Fri</div>
        <div class="day-name">Sat</div>
      </div>
      <div class="cal-grid" id="calendarGrid"></div>
      <div class="selection-summary">
        <div style="display:flex; gap:10px; align-items:center;">
          <div style="display:flex; align-items:center; gap:4px;"><span style="width:8px; height:8px; background:#10B981; border-radius:50%;"></span> Data Available</div>
        </div>
        <div>
          <strong style="color:var(--primary-color)" id="selCount">0</strong> days selected
        </div>
      </div>
    </div>
  </div>


  <div class="right-panel">
    <div class="dash-header">
      <div class="header-top">
        <div class="page-title">
          <h2>Analytics Dashboard</h2>
          <p>모니터 유동인구 및 광고 효율 분석</p>
        </div>
        <div class="header-actions">
          <button class="btn-base btn-secondary" onclick="alert('설정 페이지로 이동합니다.')">
            <i class="fa-solid fa-gear"></i> 설정 및 관리
          </button>
          <button class="btn-base btn-primary">
            <i class="fa-solid fa-file-export"></i> 리포트 다운로드
          </button>
        </div>
      </div>

      <div class="filter-bar">
        
        <div class="filter-row">
           <select class="custom-select">
            <option>전체 트래픽 (All Traffic)</option>
            <option>[광고] 나이키 겨울 시즌</option>
            <option>[광고] 아이폰 16 런칭</option>
          </select>
          
          <div class="filter-group" style="margin-left: 20px;">
            <div class="filter-label">Metric</div>
            <div class="chip-container">
               <div class="chip-btn active" onclick="this.classList.toggle('active')">Traffic</div>
               <div class="chip-btn" onclick="this.classList.toggle('active')">Attention</div>
            </div>
          </div>
        </div>

        <div class="filter-row">
          
          <div class="filter-group">
            <div class="filter-label">Gender</div>
            <div class="chip-container">
              <div class="chip-btn active-male" onclick="this.classList.toggle('active-male')">
                <i class="fa-solid fa-mars"></i> Male
              </div>
              <div class="chip-btn active-female" onclick="this.classList.toggle('active-female')">
                <i class="fa-solid fa-venus"></i> Female
              </div>
            </div>
          </div>

          <div style="width:1px; height:24px; background:#E2E8F0; margin:0 10px;"></div>

          <div class="filter-group">
            <div class="filter-label">Age</div>
            <div class="chip-container">
              <div class="chip-btn active" onclick="this.classList.toggle('active')">10s</div>
              <div class="chip-btn active" onclick="this.classList.toggle('active')">20s</div>
              <div class="chip-btn active" onclick="this.classList.toggle('active')">30s</div>
              <div class="chip-btn active" onclick="this.classList.toggle('active')">40s</div>
              <div class="chip-btn active" onclick="this.classList.toggle('active')">50s</div>
              <div class="chip-btn active" onclick="this.classList.toggle('active')">60+</div>
            </div>
          </div>

        </div>

      </div>
    </div>

    <div class="dash-content">
      <div class="kpi-grid">
        <div class="kpi-card"><div class="kpi-label">Total Impressions</div><div class="kpi-value">42,593</div></div>
        <div class="kpi-card"><div class="kpi-label">Avg. Attention</div><div class="kpi-value">3.8s</div></div>
        <div class="kpi-card"><div class="kpi-label">Peak Hour</div><div class="kpi-value">19:00</div></div>
        <div class="kpi-card"><div class="kpi-label">Main Target</div><div class="kpi-value">F / 20s</div></div>
      </div>

      <div class="chart-container">
        <div style="display:flex; justify-content:space-between;">
          <h3 style="margin:0; font-size:16px; color:#1E3A8A;">Weekly Traffic Heatmap</h3>
          <div style="font-size:12px; color:#64748B;">Low ■ ■ ■ ■ High</div>
        </div>
        <div class="heatmap-layout">
          <div class="hm-y-axis">
            <div class="hm-row-label">Mon</div><div class="hm-row-label">Tue</div><div class="hm-row-label">Wed</div>
            <div class="hm-row-label">Thu</div><div class="hm-row-label">Fri</div><div class="hm-row-label">Sat</div><div class="hm-row-label">Sun</div>
          </div>
          <div class="hm-grid-area" id="heatGrid"></div>
        </div>
        <div class="hm-x-axis">
          <span class="hm-col-label">06</span><span class="hm-col-label">07</span><span class="hm-col-label">08</span>
          <span class="hm-col-label">09</span><span class="hm-col-label">10</span><span class="hm-col-label">11</span>
          <span class="hm-col-label">12</span><span class="hm-col-label">13</span><span class="hm-col-label">14</span>
          <span class="hm-col-label">15</span><span class="hm-col-label">16</span><span class="hm-col-label">17</span>
          <span class="hm-col-label">18</span><span class="hm-col-label">19</span><span class="hm-col-label">20</span>
          <span class="hm-col-label">21</span><span class="hm-col-label">22</span><span class="hm-col-label">23</span>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // 1. 네이버 지도
  var mapOptions = { center: new naver.maps.LatLng(37.498095, 127.027610), zoom: 15, disableDefaultUI: true };
  var map = new naver.maps.Map('miniMap', mapOptions);

  // 2. 달력
  const calGrid = document.getElementById('calendarGrid');
  const selCountDisplay = document.getElementById('selCount');
  const availableData = [25, 26, 27, 28, 29, 30];
  let selectedDates = [26, 27, 28]; 

  function renderCalendar() {
    calGrid.innerHTML = '';
    for(let i=0; i<3; i++) { calGrid.innerHTML += `<div></div>`; }
    for(let d=1; d<=31; d++) {
      const hasData = availableData.includes(d);
      const isSelected = selectedDates.includes(d);
      let className = 'date-cell';
      if(hasData) className += ' has-data';
      if(isSelected) className += ' selected';
      const clickAttr = hasData ? `onclick="toggleDate(${d})"` : '';
      calGrid.innerHTML += `<div class="${className}" ${clickAttr}>${d}<div class="dot"></div></div>`;
    }
    selCountDisplay.innerText = selectedDates.length;
  }
  window.toggleDate = function(date) {
    if(selectedDates.includes(date)) selectedDates = selectedDates.filter(d => d !== date);
    else selectedDates.push(date);
    renderCalendar(); 
  }
  renderCalendar();

  // 3. 히트맵
  const heatGrid = document.getElementById('heatGrid');
  for(let i=0; i < 7 * 18; i++) {
    const lv = Math.floor(Math.random() * 5); 
    const div = document.createElement('div');
    div.className = `hm-cell ${lv > 0 ? 'l'+lv : ''}`;
    heatGrid.appendChild(div);
  }
</script>

</body>
</html>
