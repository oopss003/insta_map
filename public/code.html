<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ë…¸ë² ì´ìŠ¤ë¥¼ ìœ„í•œ ì½”ë“œ ìˆ˜ì • ë„ìš°ë¯¸</title>
    <style>
        body { font-family: 'Malgun Gothic', sans-serif; margin: 0; padding: 0; height: 100vh; overflow: hidden; background-color: #f0f2f5; }
        header { background-color: #333; color: white; padding: 10px 20px; text-align: center; font-weight: bold; }
        
        /* 3ë‹¨ ë ˆì´ì•„ì›ƒ */
        .container { display: flex; height: calc(100vh - 50px); }
        
        /* ì¢Œ/ìš°ì¸¡ íŒ¨ë„ */
        .panel { flex: 1; padding: 10px; display: flex; flex-direction: column; }
        .panel h3 { text-align: center; margin: 0 0 10px 0; color: #555; }
        textarea { flex: 1; padding: 10px; font-family: 'Consolas', monospace; font-size: 14px; border: 1px solid #ccc; border-radius: 5px; resize: none; line-height: 1.5; white-space: pre; overflow-wrap: normal; overflow-x: scroll; }
        
        /* ì¤‘ì•™ ì»¨íŠ¸ë¡¤ íŒ¨ë„ */
        .controls { flex: 0 0 350px; padding: 10px; background-color: #e9ecef; border-left: 2px solid #ddd; border-right: 2px solid #ddd; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; }
        
        /* ê° ê¸°ëŠ¥ ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
        .control-box { background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .control-box h4 { margin: 0 0 10px 0; border-bottom: 2px solid #eee; padding-bottom: 5px; }
        .control-box.delete { border-top: 5px solid #ff6b6b; } /* ì‚­ì œ - ë¹¨ê°• */
        .control-box.replace { border-top: 5px solid #4dabf7; } /* ìˆ˜ì • - íŒŒë‘ */
        .control-box.insert { border-top: 5px solid #51cf66; } /* ì¶”ê°€ - ì´ˆë¡ */

        label { display: block; margin-top: 8px; font-size: 12px; font-weight: bold; color: #666; }
        input[type="text"] { width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ddd; border-radius: 4px; box-sizing: border-box; font-family: 'Consolas', monospace; }
        
        /* ë²„íŠ¼ ê·¸ë£¹ */
        .btn-group { display: flex; gap: 5px; margin-top: 10px; }
        button { flex: 1; padding: 8px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; transition: 0.2s; }
        
        .btn-find { background-color: #fcc419; color: #333; } /* ì°¾ê¸° - ë…¸ë‘ */
        .btn-del { background-color: #fa5252; color: white; } /* ì‚­ì œ ë²„íŠ¼ */
        .btn-mod { background-color: #228be6; color: white; } /* ìˆ˜ì • ë²„íŠ¼ */
        .btn-add { background-color: #40c057; color: white; } /* ì¶”ê°€ ë²„íŠ¼ */
        
        button:hover { opacity: 0.8; }
        button:active { transform: scale(0.98); }

        /* ìƒíƒœ ë©”ì‹œì§€ */
        #status-msg { text-align: center; color: #d6336c; font-weight: bold; height: 20px; margin-top: 5px; font-size: 13px; }

    </style>
</head>
<body>

<header>ğŸ› ï¸ ë…¸ë² ì´ìŠ¤ ì½”ë“œ ìˆ˜ì • ë„ìš°ë¯¸ (ëˆ„ì  ìˆ˜ì • ë°©ì‹)</header>

<div class="container">
    <div class="panel">
        <h3>1. ì›ë³¸ ì½”ë“œ (ê¸°ì¤€)</h3>
        <textarea id="leftCode" placeholder="ì—¬ê¸°ì— ì›ë˜ ì½”ë“œë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”."></textarea>
    </div>

    <div class="controls">
        <div id="status-msg"></div>

        <div class="control-box delete">
            <h4>ğŸ—‘ï¸ ì½”ë“œ ì‚­ì œ</h4>
            <label>ì§€ìš¸ ì½”ë“œ (ë³µì‚¬í•´ì„œ ë„£ìœ¼ì„¸ìš”)</label>
            <input type="text" id="delTarget" placeholder="ì˜ˆ: delay(1000);">
            <div class="btn-group">
                <button class="btn-find" onclick="findText('delTarget')">ğŸ” ìœ„ì¹˜ í™•ì¸</button>
                <button class="btn-del" onclick="deleteCode()">âŒ ì‚­ì œ ì‹¤í–‰</button>
            </div>
        </div>

        <div class="control-box replace">
            <h4>ğŸ”„ ì½”ë“œ ìˆ˜ì • (êµì²´)</h4>
            <label>ìˆ˜ì • ì „ ì½”ë“œ (ì°¾ì„ ë‚´ìš©)</label>
            <input type="text" id="modBefore" placeholder="ì˜ˆ: int a = 10;">
            <label>ìˆ˜ì • í›„ ì½”ë“œ (ë°”ê¿€ ë‚´ìš©)</label>
            <input type="text" id="modAfter" placeholder="ì˜ˆ: int a = 20;">
            <div class="btn-group">
                <button class="btn-find" onclick="findText('modBefore')">ğŸ” ìœ„ì¹˜ í™•ì¸</button>
                <button class="btn-mod" onclick="replaceCode()">ğŸ”„ êµì²´ ì‹¤í–‰</button>
            </div>
        </div>

        <div class="control-box insert">
            <h4>â• ì½”ë“œ ì¶”ê°€ (ë¼ì›Œë„£ê¸°)</h4>
            <label>ë°”ë¡œ ìœ—ì¤„ ì½”ë“œ (ê¸°ì¤€ì )</label>
            <input type="text" id="addAnchor" placeholder="ì˜ˆ: void setup() {">
            <label>ì¶”ê°€í•  ì½”ë“œ (ìƒˆ ë‚´ìš©)</label>
            <input type="text" id="addContent" placeholder="ì˜ˆ: Serial.begin(9600);">
            <div class="btn-group">
                <button class="btn-find" onclick="findText('addAnchor')">ğŸ” ìœ„ì¹˜ í™•ì¸</button>
                <button class="btn-add" onclick="insertCode()">â• ì¶”ê°€ ì‹¤í–‰</button>
            </div>
        </div>
    </div>

    <div class="panel">
        <h3>3. ê²°ê³¼ ì½”ë“œ (ì™„ì„±ë³¸)</h3>
        <textarea id="rightCode" placeholder="ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì—¬ê¸°ì— ìˆ˜ì •ëœ ì½”ë“œê°€ ë‚˜ì˜µë‹ˆë‹¤."></textarea>
    </div>
</div>

<script>
    // í˜ì´ì§€ ë¡œë“œ ì‹œ, ì¢Œì¸¡ ì½”ë“œê°€ ë°”ë€Œë©´ ìš°ì¸¡ì— ë³µì‚¬í•´ë‘  (ì´ˆê¸°í™”)
    const leftArea = document.getElementById('leftCode');
    const rightArea = document.getElementById('rightCode');
    const msgArea = document.getElementById('status-msg');

    leftArea.addEventListener('input', function() {
        if(rightArea.value === "") { // ìš°ì¸¡ì´ ë¹„ì–´ìˆì„ ë•Œë§Œ ìë™ ë™ê¸°í™”
            rightArea.value = leftArea.value;
        }
    });

    // 1. ì°¾ê¸° ê¸°ëŠ¥ (ì¢Œì¸¡ ì›ë³¸ì—ì„œ í•˜ì´ë¼ì´íŠ¸)
    function findText(inputId) {
        const textToFind = document.getElementById(inputId).value;
        if (!textToFind) { showMsg("ì°¾ì„ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”!"); return; }

        const content = leftArea.value;
        const index = content.indexOf(textToFind);

        if (index !== -1) {
            leftArea.focus();
            leftArea.setSelectionRange(index, index + textToFind.length);
            showMsg("ì¢Œì¸¡ì—ì„œ ì½”ë“œë¥¼ ì°¾ì•˜ìŠµë‹ˆë‹¤! (íŒŒë€ìƒ‰ ë¸”ë¡)");
        } else {
            showMsg("âš ï¸ ì¢Œì¸¡ ì›ë³¸ì— ê·¸ëŸ° ì½”ë“œê°€ ì—†ìŠµë‹ˆë‹¤.");
        }
    }

    // 2. ì‚­ì œ ê¸°ëŠ¥
    function deleteCode() {
        const target = document.getElementById('delTarget').value;
        if (!target) return;

        let currentCode = rightArea.value || leftArea.value; // ìš°ì¸¡ê°’ì´ ì—†ìœ¼ë©´ ì¢Œì¸¡ê°’ ì‚¬ìš©
        
        if (currentCode.includes(target)) {
            // í•´ë‹¹ ì½”ë“œë¥¼ ë¹ˆ ë¬¸ìì—´ë¡œ ëŒ€ì²´ (ì‚­ì œ)
            rightArea.value = currentCode.replace(target, ""); 
            showMsg("âœ… ì‚­ì œ ì™„ë£Œ! (ìš°ì¸¡ í™•ì¸)");
        } else {
            showMsg("âš ï¸ ì´ë¯¸ ì‚­ì œë˜ì—ˆê±°ë‚˜ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }
    }

    // 3. ìˆ˜ì • ê¸°ëŠ¥
    function replaceCode() {
        const before = document.getElementById('modBefore').value;
        const after = document.getElementById('modAfter').value;
        if (!before) return;

        let currentCode = rightArea.value || leftArea.value;

        if (currentCode.includes(before)) {
            rightArea.value = currentCode.replace(before, after);
            showMsg("âœ… ìˆ˜ì • ì™„ë£Œ! (ìš°ì¸¡ í™•ì¸)");
        } else {
            showMsg("âš ï¸ ìˆ˜ì •í•  ì½”ë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }
    }

    // 4. ì¶”ê°€ ê¸°ëŠ¥ (ë¼ì›Œë„£ê¸°)
    function insertCode() {
        const anchor = document.getElementById('addAnchor').value;
        const content = document.getElementById('addContent').value;
        if (!anchor) return;

        let currentCode = rightArea.value || leftArea.value;

        if (currentCode.includes(anchor)) {
            // ê¸°ì¤€ ì½”ë“œ ë’¤ì— ì¤„ë°”ê¿ˆ(\n) + ìƒˆ ì½”ë“œ ì¶”ê°€
            const newBlock = anchor + "\n" + content;
            rightArea.value = currentCode.replace(anchor, newBlock);
            showMsg("âœ… ì¶”ê°€ ì™„ë£Œ! (ìš°ì¸¡ í™•ì¸)");
        } else {
            showMsg("âš ï¸ ê¸°ì¤€ ì½”ë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        }
    }

    // ë©”ì‹œì§€ í‘œì‹œ ë„ìš°ë¯¸
    function showMsg(text) {
        msgArea.innerText = text;
        setTimeout(() => { msgArea.innerText = ""; }, 3000);
    }
</script>

</body>
</html>
