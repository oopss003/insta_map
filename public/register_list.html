<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8">
  <title>ë§¤ì¥ ë¦¬ìŠ¤íŠ¸ ë³´ê¸°</title>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
  <style>
    body { font-family: 'Pretendard', sans-serif; padding: 20px; background: #f5f5f5; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 6px; font-size: 12px; vertical-align: top; }
    th { background: #eee; position: sticky; top: 0; z-index: 1; }
    tr:hover { background: #f0f0f0; }
    .nowrap { white-space: nowrap; }
  </style>
</head>
<body>
  <h2>ì „ì²´ ë§¤ì¥ ë¦¬ìŠ¤íŠ¸ (ê´€ë¦¬ì ì „ìš©)</h2>
  <table id="storeTable">
    <thead>
      <tr>
        <th>ë§¤ì¥ì´ë¦„</th>
        <th>í•´ì‹œíƒœê·¸</th>
        <th>ì „í™”ë²ˆí˜¸</th>
        <th>ë‹´ë‹¹ì´ë©”ì¼</th>
        <th>ì£¼ì†Œ(Lat, Lng)</th>
        <th>ì‚¬ì§„ë§í¬</th>
        <th>ë¹„ë””ì˜¤ë§í¬</th>
        <th>ì§€ë„ë…¸ì¶œ</th>
        <th>ìš”ì¼ë³„ ì •ë³´</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCVV1XUfsREQYnah3tbEKBTprgq9wRgiic",
      authDomain: "instamap-9b595.firebaseapp.com",
      projectId: "instamap-9b595",
      storageBucket: "instamap-9b595.firebasestorage.app",
      messagingSenderId: "280950399393",
      appId: "1:280950399393:web:8282e0d352e50c8bcd2be0"
    };
    
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const days = ['ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† ','ì¼'];

    db.collection("stores").get().then(snapshot => {
      const tbody = document.querySelector("#storeTable tbody");
      snapshot.forEach(doc => {
        const d = doc.data();

        const tr = document.createElement("tr");
        
        const hashtags = (d.hashtags || []).join(", ");
        const photo = d.photo ? `<a href="${d.photo}" target="_blank">ì‚¬ì§„ë³´ê¸°</a>` : "-";
        const video = d.vimeo ? `<a href="${d.vimeo}" target="_blank">ë§í¬</a>` : "-";
        const display = (typeof d.lat === "number" && typeof d.lng === "number") ? "O" : "X";

        const hoursHtml = days.map(day => {
          const h = d.hours?.[day] || {};
          return `
            <div class="nowrap"><strong>${day}</strong><br>
              â° ${h.time?.start || "-"} ~ ${h.time?.end || "-"}<br>
              â˜• ${h.break?.start || "-"} ~ ${h.break?.end || "-"}<br>
              ğŸ•˜ ${h.lastOrder?.time || "-"}
            </div>
          `;
        }).join("");

        tr.innerHTML = `
          <td>${d.name || "-"}</td>
          <td>${hashtags}</td>
          <td>${d.phone || "-"}</td>
          <td>${d.userEmail || "-"}</td>
          <td>${d.lat}, ${d.lng}</td>
          <td>${photo}</td>
          <td>${video}</td>
          <td style="text-align:center">${display}</td>
          <td>${hoursHtml}</td>
        `;

        tbody.appendChild(tr);
      });
    });
  </script>
</body>
</html>

