<!DOCTYPE html>
<html>
<head>
    <title>Sign in with Apple Example</title>
    <script type="text/javascript" src="https://appleid.cdn-apple.com/appleauth/static/jsapi/appleid/1/en_US/appleid.auth.js"></script>
</head>
<body>
    <h1>Sign in with Apple</h1>

    <div id="appleid-signin" data-color="black" data-border="true" data-type="sign-in"></div>

    <script type="text/javascript">
        // 페이지 로드 시 Apple 로그인 초기화
        AppleID.auth.init({
            clientId : 'com.yourdomain.signin', // 본인의 Services ID로 변경
            scope : 'name email',
            redirectURI: 'https://yourdomain.com/callback', // 본인의 리디렉션 URL로 변경
            state : 'a_random_string_that_you_generate', // 실제로는 동적으로 생성해야 함
            usePopup : true
        });

        // 사용자가 로그인 성공 후 리디렉션 되었을 때의 이벤트 처리
        document.addEventListener('AppleIDSignInOnSuccess', (data) => {
             // 3단계에서 이 부분의 서버 로직을 구현합니다.
             console.log("Apple Login Success!", data.detail);
             // data.detail.authorization.code 값을 서버로 전송해야 합니다.
        });

        // 로그인 실패 시 이벤트 처리
        document.addEventListener('AppleIDSignInOnFailure', (error) => {
             console.error("Apple Login Failed", error);
        });
    </script>
</body>
</html>







